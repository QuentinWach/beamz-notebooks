/*
 * notebook.css — Make Jupyter notebook pages look like native shadcn pages.
 *
 * The Jupyter CSS is injected as inline <style> blocks in <body> AFTER our
 * <link> in <head>, so at equal specificity the Jupyter rules win by source
 * order. Every rule here that competes with inline Jupyter CSS uses !important.
 */

/* ===== 0. Wider content + tighter text line spacing ===== */
/* Main content column wider so notebooks show more code */
article {
  max-width: var(--container-2xl) !important;
}

article p,
article li,
article .typography p,
article .typography li {
  line-height: var(--leading-relaxed) !important;
}

/* ===== 1. Hide Jupyter chrome ===== */

.jupyter-wrapper .jp-InputPrompt,
.jupyter-wrapper .jp-OutputPrompt {
  display: none !important;
}

.jupyter-wrapper .jp-Collapser {
  display: none !important;
}

.jupyter-wrapper .clipboard-copy-txt {
  display: none !important;
}

.jupyter-wrapper .anchor-link {
  display: none !important;
}


/* ===== 2. Strip cell / wrapper chrome ===== */

.jupyter-wrapper .jp-Notebook {
  padding: 0 !important;
  overflow: visible !important;
}

.jupyter-wrapper .jp-Cell {
  padding: 0 !important;
  margin: 0 !important;
  border: none !important;
  background: transparent !important;
}

/* Defeat grid layout on code cells — prevents side-by-side input/output */
.jupyter-wrapper .jp-CodeCell {
  display: block !important;
}

.jupyter-wrapper .jp-Cell-inputWrapper,
.jupyter-wrapper .jp-Cell-outputWrapper {
  display: block !important;
  padding: 0 !important;
  margin: 0 !important;
  border: none !important;
  overflow: visible !important;
}

.jupyter-wrapper .jp-InputArea {
  display: block !important;
  padding: 0 !important;
  margin: 0 !important;
  overflow: visible !important;
}

.jupyter-wrapper .jp-CodeMirrorEditor {
  width: 100% !important;
  padding: 0 !important;
  margin: 0 !important;
  border: none !important;
  background: transparent !important;
  overflow: visible !important;
}

.jupyter-wrapper .CodeMirror {
  height: auto !important;
  background: transparent !important;
  overflow: visible !important;
  position: relative;
}


/* ===== 3. Neutralize paragraph override ===== */
/* Jupyter inline CSS: .jupyter-wrapper p { margin-bottom: 10px; margin-top: 0 } */

.jupyter-wrapper p {
  margin: 0 !important;
  line-height: var(--leading-relaxed) !important;
}

.jupyter-wrapper p:not(:first-child) {
  margin-top: calc(var(--spacing) * 6) !important;
}

.jupyter-wrapper h2 + p {
  margin-top: calc(var(--spacing) * 4) !important;
}


/* ===== 4. Code cell styling ===== */
/* Match shadcn's `article pre` exactly */

.jupyter-wrapper .highlight-ipynb {
  overflow: visible !important;
  background: transparent !important;
}

.jupyter-wrapper .highlight-ipynb pre {
  background-color: var(--color-muted) !important;
  border-radius: var(--radius-xl) !important;
  padding: calc(var(--spacing) * 4) !important;
  overflow: auto !important;
  display: block !important;
  font-family: var(--font-mono) !important;
  font-size: var(--text-code) !important;
  line-height: 1.4 !important;
  margin-top: calc(var(--spacing) * 6) !important;
  margin-bottom: calc(var(--spacing) * 4) !important;
}


/* ===== 5. Code span styling ===== */

.jupyter-wrapper .highlight-ipynb pre > span {
  padding-block: calc(var(--spacing) * 0.5) !important;
}


/* ===== 6. Copy button positioning ===== */

.jupyter-wrapper .zeroclipboard-container {
  position: absolute !important;
  top: 8px !important;
  right: 8px !important;
  z-index: 1 !important;
}


/* ===== 7. Output cell styling ===== */

/* Remove extra top margin on output wrapper */
.jupyter-wrapper .jp-Cell:not(.jp-mod-noOutputs) .jp-Cell-outputWrapper {
  margin-top: 0 !important;
}

/* Output area: block layout, no grid/flex */
.jupyter-wrapper .jp-OutputArea {
  display: block !important;
}

.jupyter-wrapper .jp-OutputArea-child {
  display: block !important;
}

/* Text output: mono font, proper sizing */
.jupyter-wrapper .jp-RenderedText pre {
  font-family: var(--font-mono) !important;
  font-size: var(--text-code) !important;
  line-height: 1.4 !important;
  padding: calc(var(--spacing) * 4) !important;
  margin-bottom: calc(var(--spacing) * 4) !important;
  border: none !important;
}

/* Round image corners in output cells */
.jupyter-wrapper .jp-RenderedImage img {
  border-radius: var(--radius-xl) !important;
  margin-block: calc(var(--spacing) * 4) !important;
}

/* Rendered HTML output width */
.jupyter-wrapper .jp-RenderedHTMLCommon {
  width: 100% !important;
}


/* ===== 8. Hide dark/light mode toggle ===== */
button[title="Toggle theme"] {
  display: none !important;
}


/* ===== 9. Hide duplicate notebook H1 + make page title bolder ===== */
.jupyter-wrapper .jp-Notebook > .jp-MarkdownCell:first-child h1 {
  display: none !important;
}

/* Bolder h1 title on notebook pages */
article #page-header h1 {
  font-weight: 700 !important;
}


/* ===== 10. Text output styling ===== */
.jupyter-wrapper .jp-RenderedText pre {
  background-color: var(--color-muted) !important;
  border-radius: var(--radius-xl) !important;
}


/* ===== 11. Rich HTML output styling ===== */
.jupyter-wrapper .jp-RenderedHTMLCommon pre[style] {
  background-color: var(--color-muted) !important;
  border-radius: var(--radius-xl) !important;
  padding: calc(var(--spacing) * 4) !important;
  font-size: var(--text-code) !important;
  margin-bottom: calc(var(--spacing) * 4) !important;
}


/* ===== 12. Output child spacing ===== */
.jupyter-wrapper .jp-OutputArea-child + .jp-OutputArea-child {
  margin-top: calc(var(--spacing) * 2) !important;
}

/* ===== 13. Markdown code blocks + inline code (match notebook style) ===== */
/* Block code: same look as notebook code cells */
article pre,
article .codehilite pre,
article .highlight pre {
  max-height: none !important;
  overflow: visible !important;
  background-color: var(--color-muted) !important;
  border-radius: var(--radius-xl) !important;
  padding: calc(var(--spacing) * 3) !important;
  font-family: var(--font-mono) !important;
  font-size: var(--text-code) !important;
  line-height: 1.4 !important;
  margin-top: calc(var(--spacing) * 2) !important;
  margin-bottom: calc(var(--spacing) * 2) !important;
}

article .codehilite,
article .highlight {
  margin-top: calc(var(--spacing) * 2) !important;
  margin-bottom: calc(var(--spacing) * 2) !important;
  border-radius: var(--radius-xl) !important;
  overflow: hidden !important;
}

article .codehilite pre,
article .highlight pre {
  margin-top: 0 !important;
  margin-bottom: 0 !important;
}

/* Inline code in markdown: match notebook inline style */
article code:not(pre code) {
  font-family: var(--font-mono) !important;
  font-size: 0.85em !important;
  background-color: var(--color-muted) !important;
  border-radius: var(--radius-md) !important;
  padding: 0.15em 0.35em !important;
}

/* ===== 14. Syntax highlighting for markdown code blocks (Pygments) ===== */
article .highlight span.k,
article .highlight span.kc,
article .highlight span.kd,
article .highlight span.kn,
article .highlight span.kp,
article .highlight span.kr,
article .highlight span.kt,
article .codehilite span.k,
article .codehilite span.kc,
article .codehilite span.kd,
article .codehilite span.kn,
article .codehilite span.kp,
article .codehilite span.kr,
article .codehilite span.kt {
  color: var(--code-keyword) !important;
}

article .highlight span.s,
article .highlight span.s1,
article .highlight span.s2,
article .highlight span.sb,
article .highlight span.sc,
article .highlight span.sd,
article .highlight span.se,
article .highlight span.sh,
article .highlight span.si,
article .highlight span.sx,
article .codehilite span.s,
article .codehilite span.s1,
article .codehilite span.s2,
article .codehilite span.sb,
article .codehilite span.sc,
article .codehilite span.sd,
article .codehilite span.se,
article .codehilite span.sh,
article .codehilite span.si,
article .codehilite span.sx {
  color: var(--code-string) !important;
}

article .highlight span.c,
article .highlight span.c1,
article .highlight span.cm,
article .highlight span.cp,
article .codehilite span.c,
article .codehilite span.c1,
article .codehilite span.cm,
article .codehilite span.cp {
  color: var(--code-comment) !important;
  font-style: italic !important;
}

article .highlight span.nb,
article .codehilite span.nb {
  color: var(--code-name-builtin) !important;
}

article .highlight span.m,
article .highlight span.mi,
article .highlight span.mf,
article .highlight span.mh,
article .highlight span.mo,
article .codehilite span.m,
article .codehilite span.mi,
article .codehilite span.mf,
article .codehilite span.mh,
article .codehilite span.mo {
  color: var(--code-number) !important;
}

article .highlight span.o,
article .highlight span.p,
article .codehilite span.o,
article .codehilite span.p {
  color: var(--code-operator) !important;
}

article .highlight span.n,
article .highlight span.na,
article .highlight span.nc,
article .highlight span.nd,
article .highlight span.ne,
article .highlight span.nf,
article .highlight span.nn,
article .highlight span.no,
article .highlight span.nt,
article .highlight span.nv,
article .codehilite span.n,
article .codehilite span.na,
article .codehilite span.nc,
article .codehilite span.nd,
article .codehilite span.ne,
article .codehilite span.nf,
article .codehilite span.nn,
article .codehilite span.no,
article .codehilite span.nt,
article .codehilite span.nv {
  color: var(--code-name) !important;
}
