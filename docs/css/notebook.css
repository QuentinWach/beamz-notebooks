/*
 * notebook.css — Make Jupyter notebook pages look like native shadcn pages.
 *
 * The Jupyter CSS is injected as inline <style> blocks in <body> AFTER our
 * <link> in <head>, so at equal specificity the Jupyter rules win by source
 * order. Every rule here that competes with inline Jupyter CSS uses !important.
 */


/* ===== 1. Hide Jupyter chrome ===== */

.jupyter-wrapper .jp-InputPrompt,
.jupyter-wrapper .jp-OutputPrompt {
  display: none !important;
}

.jupyter-wrapper .jp-Collapser {
  display: none !important;
}

.jupyter-wrapper .clipboard-copy-txt {
  display: none !important;
}

.jupyter-wrapper .anchor-link {
  display: none !important;
}


/* ===== 2. Strip cell / wrapper chrome ===== */

.jupyter-wrapper .jp-Notebook {
  padding: 0 !important;
}

.jupyter-wrapper .jp-Cell {
  padding: 0 !important;
  margin: 0 !important;
  border: none !important;
  background: transparent !important;
}

/* Defeat grid layout on code cells — prevents side-by-side input/output */
.jupyter-wrapper .jp-CodeCell {
  display: block !important;
}

.jupyter-wrapper .jp-Cell-inputWrapper,
.jupyter-wrapper .jp-Cell-outputWrapper {
  display: block !important;
  padding: 0 !important;
  margin: 0 !important;
  border: none !important;
  overflow: visible !important;
}

.jupyter-wrapper .jp-InputArea {
  display: block !important;
  padding: 0 !important;
  margin: 0 !important;
  overflow: visible !important;
}

.jupyter-wrapper .jp-CodeMirrorEditor {
  width: 100% !important;
  padding: 0 !important;
  margin: 0 !important;
  border: none !important;
  background: transparent !important;
  overflow: visible !important;
}

.jupyter-wrapper .CodeMirror {
  height: auto !important;
  background: transparent !important;
  overflow: visible !important;
  position: relative;
}


/* ===== 3. Neutralize paragraph override ===== */
/* Jupyter inline CSS: .jupyter-wrapper p { margin-bottom: 10px; margin-top: 0 } */

.jupyter-wrapper p {
  margin: 0 !important;
  line-height: var(--leading-relaxed) !important;
}

.jupyter-wrapper p:not(:first-child) {
  margin-top: calc(var(--spacing) * 6) !important;
}

.jupyter-wrapper h2 + p {
  margin-top: calc(var(--spacing) * 4) !important;
}


/* ===== 4. Code cell styling ===== */
/* Match shadcn's `article pre` exactly */

.jupyter-wrapper .highlight-ipynb {
  overflow: visible !important;
  background: transparent !important;
}

.jupyter-wrapper .highlight-ipynb pre {
  background-color: var(--color-muted) !important;
  border-radius: var(--radius-xl) !important;
  padding: calc(var(--spacing) * 4) !important;
  max-height: 650px !important;
  overflow: auto !important;
  display: block !important;
  font-family: var(--font-mono) !important;
  font-size: var(--text-sm) !important;
  line-height: var(--tw-leading, var(--text-sm--line-height)) !important;
  margin-top: calc(var(--spacing) * 6) !important;
  margin-bottom: calc(var(--spacing) * 4) !important;
}


/* ===== 5. Code span styling ===== */

.jupyter-wrapper .highlight-ipynb pre > span {
  padding-block: calc(var(--spacing) * 0.5) !important;
}


/* ===== 6. Copy button positioning ===== */

.jupyter-wrapper .zeroclipboard-container {
  position: absolute !important;
  top: calc(var(--spacing) * 6 + 4px) !important;
  right: 4px !important;
  z-index: 1 !important;
}


/* ===== 7. Output cell styling ===== */

/* Remove extra top margin on output wrapper */
.jupyter-wrapper .jp-Cell:not(.jp-mod-noOutputs) .jp-Cell-outputWrapper {
  margin-top: 0 !important;
}

/* Output area: block layout, no grid/flex */
.jupyter-wrapper .jp-OutputArea {
  display: block !important;
}

.jupyter-wrapper .jp-OutputArea-child {
  display: block !important;
}

/* Text output: mono font, proper sizing */
.jupyter-wrapper .jp-RenderedText pre {
  font-family: var(--font-mono) !important;
  font-size: var(--text-sm) !important;
  line-height: var(--tw-leading, var(--text-sm--line-height)) !important;
  padding: calc(var(--spacing) * 4) !important;
  margin-bottom: calc(var(--spacing) * 4) !important;
  border: none !important;
}

/* Round image corners in output cells */
.jupyter-wrapper .jp-RenderedImage img {
  border-radius: var(--radius-xl) !important;
  margin-block: calc(var(--spacing) * 4) !important;
}

/* Rendered HTML output width */
.jupyter-wrapper .jp-RenderedHTMLCommon {
  width: 100% !important;
}


/* ===== 8. Hide dark/light mode toggle ===== */
button[title="Toggle theme"] {
  display: none !important;
}


/* ===== 9. Hide duplicate notebook H1 title ===== */
.jupyter-wrapper .jp-Notebook > .jp-MarkdownCell:first-child h1 {
  display: none !important;
}


/* ===== 10. Text output styling ===== */
.jupyter-wrapper .jp-RenderedText pre {
  background-color: var(--color-muted) !important;
  border-radius: var(--radius-xl) !important;
}


/* ===== 11. Rich HTML output styling ===== */
.jupyter-wrapper .jp-RenderedHTMLCommon pre[style] {
  background-color: var(--color-muted) !important;
  border-radius: var(--radius-xl) !important;
  padding: calc(var(--spacing) * 4) !important;
  font-size: var(--text-sm) !important;
  margin-bottom: calc(var(--spacing) * 4) !important;
}


/* ===== 12. Output child spacing ===== */
.jupyter-wrapper .jp-OutputArea-child + .jp-OutputArea-child {
  margin-top: calc(var(--spacing) * 2) !important;
}
